{% extends "base.html" %}
{% block title %}{{ 'Edit Need' if editing else 'Add Need' }} â€” The Hive{% endblock %}
{% block content %}

<h2 style="margin-bottom:16px;">
  {{ 'Edit Need' if editing else 'Create a New Need' }}
</h2>

<form
    action="{{ url_for('edit_need', need_id=need.need_id) if editing else url_for('add_need') }}"
    method="POST"
    enctype="multipart/form-data"
    class="card"
    style="color:black; background:white;"
>

    <!-- TITLE -->
    <input type="text" name="title"
           placeholder="Title (e.g., Need help with painting)"
           value="{{ need.title if editing else '' }}"
           required
           style="margin-top:8px; width:100%; padding:10px;">

    <!-- DESCRIPTION -->
    <textarea name="description"
              placeholder="Describe your need..."
              required
              style="margin-top:8px; width:100%; padding:10px;">{{ need.description if editing else '' }}</textarea>

    <!-- HOURS -->
    <input type="number" name="hours"
           placeholder="Hours requested"
           min="1"
           value="{{ need.hours if editing else '' }}"
           required
           style="margin-top:8px; width:100%; padding:10px;">

    <!-- LOCATION -->
    <input type="text" name="location"
           placeholder="Location (City/District, or 'Online')"
           value="{{ need.location if editing else '' }}"
           required
           style="margin-top:8px; width:100%; padding:10px;">
    <!-- NEEDED ON DATE -->
    <label style="margin-top:12px; display:block; font-size:0.9rem;">
        Needed on
    </label>
    <input type="date"
           name="needed_on"
           value="{{ need.needed_on.strftime('%Y-%m-%d') if editing and need.needed_on else today_str }}"
           required
           style="margin-top:4px; width:100%; padding:10px;">

    <!-- IMAGE UPLOAD -->
    <label style="margin-top:12px; display:block; font-size:0.9rem;">
        Upload Thumbnail Image (optional)
    </label>

    {% if editing and need.image_filename %}
      <p style="font-size:0.9rem; color:#444;">
        Current Image: {{ need.image_filename }}
      </p>
    {% endif %}

    <input type="file" name="image" accept="image/*" style="margin-top:4px;">

    <!-- SUBMIT BUTTON -->
    <button class="btn" type="submit" style="margin-top:12px; width:100%;">
        {{ 'Save Changes' if editing else 'Publish Need' }}
    </button>

</form>

{% endblock %}
